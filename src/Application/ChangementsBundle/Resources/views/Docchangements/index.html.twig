{% extends "ApplicationChangementsBundle::layout.html.twig" %}
{% macro icon_class( type ) %}
  {% set type_class_map = {
    like: 'icon-user'
  } %}
  {{ type_class_map[type] }}
{% endmacro %}

{% block javascripts %}
    {{ parent() }}
   <script type="text/javascript" src="{{ asset('js/compiled/changementsown.js') }}"></script>
  {% if is_granted("IS_AUTHENTICATED_FULLY") %}
<script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
<script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
<script type="text/javascript" src="{{ asset('bundles/applicationchangements/js/changementsicons.js') }}"></script>
{% endif %}
   {{ form_javascript(search_form) }}
{% endblock %}


  {% block stylesheets %}
{{ parent() }}
   <link rel="stylesheet" href="{{ asset('bundles/applicationchangements/css/ccpchangements.css') }}" type="text/css" media="all"/>
  <style>

            .table {
                font-size: 11px;
                /* border-collapse: separate;*/
                /*  font-family: 'Times New Roman',Times,serif;*/
            }
            select option:hover {
                background-color: #b6d1fd;
}
            select#docchangements_searchfilter_idchangements{
            width:250px;height:300px;}
            label {
                color:#02195e;
              /*  text-align: left;*/
    
}
</style>
{{ form_stylesheet(search_form) }}
{% endblock %}

{% block content_header '' %}

        
{% block title %}
Fichiers sur les Op√©rations
{% endblock %}


{% block content %}

{% for type, flashMessages in app.session.flashbag.all() %}
    {% for flashMessage in flashMessages %}
<div class="alert alert-{{ type }}">
            {{ flashMessage|trans }}
    </div>
    {% endfor %}
{% endfor %}


{% include 'ApplicationChangementsBundle:templates:container_search.html.twig' 
        with {
            'form_path': 'docchangements',
            'search_form': search_form,'box':"ShowHideBoxown",
             'new_path': 'docchangements_new',
            'new_text':"Ajouter un Fichier",
              'include_html_search': 'ApplicationChangementsBundle:Docchangements:indexsearch_form.html.twig'
}
%}
 
<br> <br>  

    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr class="title">
                <th>{{ knp_pagination_sortable(pagination, 'Id', 'a.id') }}</th>
                <th{% if pagination.isSorted('a.name') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Description', 'a.name') }}</th>
                <th{% if pagination.isSorted('a.OriginalFilename') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Nom Origine', 'a.OriginalFilename') }}</th>
                <th{% if pagination.isSorted('a.md5') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'md5', 'a.md5') }}</th>
                <th{% if pagination.isSorted('a.updatedAt') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Date Update', 'a.updatedAt') }}</th>
                <th{% if pagination.isSorted('b.idchangement.nom') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Changements', 'b.idchangement.nom') }}</th>
                <th>Changements</th>
                <th colspan="3">Actions</th>
            </tr>
      <tbody>
      {% for entity in pagination %}
      <tr>
            <td><a href="{{ path('docchangements_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
            <td>{{ entity.name }}</td>
            <td>
                {% if entity.OriginalFilename %}
                    <a class="fichier" href="{{ path('docchangements_download', { 'id': entity.id }) }}">{{ entity.OriginalFilename }}</a>
                    {% elseif entity.path %}
                <a class="fichier" href="{{ path('docchangements_download', { 'id': entity.id }) }}">{{ entity.path }}</a>
           {% else %}
                error
                 {% endif %}
                 </td>
            <td>{{ entity.md5 }}</td>
            <td>{% if entity.updatedAt %}{{ entity.updatedAt|date('Y-m-d H:i:s') }}{% endif %}</td>
            <td>{{ entity.idchangement|join('<br> ')|raw }}</td>
            <td>
                    <a href="{{ path('docchangements_show', { 'id': entity.id }) }}">
                        <img src="{{ asset('bundles/applicationcertificats/images/detail.png') }}" alt="show" width="15" height="15" />
                    </a>
            </td>
            <td>
                  <a href="{{ path('docchangements_edit', { 'id': entity.id }) }}">
                      <img src="{{ asset('bundles/applicationcertificats/images/edit.png') }}" alt="edit" width="15" height="15" />
                  </a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{{ knp_pagination_render(pagination) }}
{% endblock %}
    