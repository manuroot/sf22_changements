<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head id="Head1">
     <title>	My Calendar </title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

    <link rel="stylesheet" href="{{ asset('css/wdcalendar/dailog.css') }}" type="text/css" media="all"/>  
    <link rel="stylesheet" href="{{ asset('css/wdcalendar/calendar.css') }}" type="text/css" media="all"/>
    <link rel="stylesheet" href="{{ asset('css/wdcalendar/dp.css') }}" type="text/css" media="all"/>
    <link rel="stylesheet" href="{{ asset('css/wdcalendar/alert.css') }}" type="text/css" media="all"/>
    <link rel="stylesheet" href="{{ asset('css/wdcalendar/main.css') }}" type="text/css" media="all"/>
  
    <style type="text/css">     
    .calpick     {        
        width:16px;   
        height:16px;     
        border:none;        
        cursor:pointer;        
        background:url("/uzf04new/css/wdcalendar/images/cal.gif") no-repeat center 2px;        
        margin-left:-22px;    
    }      
    .mask{
        width:100%;
        height:100%;
        position:absolute;
        background-color:grey;
        z-index:1;
        filter:alpha(opacity=80);
        opacity:.8;
    }
    .mask div{
        width: 50%;
        text-align:center;
        position: absolute; 
        top: 50%;
        left: 25%;
        color:white;

    }
</style>
    
    
    <script src="{{ asset('jquery/jquery-1.8.3.js') }}" type="text/javascript"></script>
   <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
   <script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>
   
   
   
  
   <script type="text/javascript" src="{{ asset('jquery/wdcalendar/Plugins/Common.js') }}"></script>
   <script type="text/javascript" src="{{ asset('jquery/wdcalendar/Plugins/datepicker_lang_US.js') }}"></script>
   <script type="text/javascript" src="{{ asset('jquery/wdcalendar/jquery.js') }}"></script>
  <script type="text/javascript" src="{{ asset('jquery/jquery-ui-1.8.23.custom.min.js') }}"></script>
      <script type="text/javascript" src="{{ asset('jquery/wdcalendar/Plugins/jquery.datepicker.js') }}"></script>
   
   <script type="text/javascript" src="{{ asset('jquery/wdcalendar/Plugins/jquery.alert.js') }}"></script>
   <script type="text/javascript" src="{{ asset('jquery/wdcalendar/Plugins/jquery.ifrmdailog.js') }}"></script>
   
   <script type="text/javascript" src="{{ asset('jquery/wdcalendar/Plugins/wdCalendar_lang_US.js') }}"></script>
   <script type="text/javascript" src="{{ asset('jquery/wdcalendar/Plugins/jquery.calendar.js') }}"></script>
 
   <script type="text/javascript" src="{{ asset('bundles/applicationchangements/js/wdcalendar.js') }}"></script>
 
  
<script type="text/javascript">
      
    $(document).ready(function() {
        //debugger;
         var DATA_FEED_URL = Routing.generate('calendar_ajax');
        /*var DATA_FEED_URL = "/uzf04new/wdcalendara/datafeed";*/
        var cv =$("#Color").val() ;
        if(cv=="")
        {
            cv="-1";
        }
        $("#calendarcolor").colorselect({ title: "Color", index: cv, hiddenid: "Color" });
           //to define parameters of ajaxform
            var options = {
                beforeSubmit: function() {
                    return true;
                },
                dataType: "json",
                success: function(data) {
                  //  alert(data.Msg);
                    if (data.IsSuccess) {
                        CloseModelWindow(null,true);  
                    }
                }
            };
          $("#Savebtn").click(function() { 
              $("#ChangementsForm").submit(); 
         
       $("#gridcontainer").reload();    
      });
            $("#Closebtn").click(function() { CloseModelWindow(); });
            $("#Deletebtn").click(function() {
                 if (confirm("Are you sure to remove this event")) {  
                    var param = [{ "name": data}];                
                    $.post(DATA_FEED_URL + "?method=remove",
                        param,
                        function(data){
                              if (data.IsSuccess) {
                                    alert(data.Msg); 
                                    CloseModelWindow(null,true);                            
                                }
                                else {
                                    alert("Error occurs.\r\n" + data.Msg);
                                }
                        }
                    ,"json");
                }
            });
         $("#ChangementsForm").validate({
            submitHandler: function(form) { 
                $("#ChangementsForm").ajaxSubmit(options);
               
                CloseModelWindow();
            
        },
           errorElement: "div",
            errorClass: "cusErrorPanel",
            errorPlacement: function(error, element) {
                showerror(error, element);
            }
        });
        
        function showerror(error, target) {
            var pos = target.position();
            var height = target.height();
            var newpos = { left: pos.left, top: pos.top + height + 2 }
            var form = $("#ChangementsForm");             
            error.appendTo(form).css(newpos);
        }
    });
</script>      

    </head>
   <body>
        <div>


 <div class="toolBotton">           
        <a id="Savebtn" class="imgbtn" href="javascript:void(0);">                
          <span class="Save"  title="Save the calendar">Save(<u>S</u>)
          </span>          
        </a>                           
       <!--      <a id="Deletebtn" class="imgbtn" href="javascript:void(0);">                    
          <span class="Delete" title="Cancel the calendar">Delete(<u>D</u>)
          </span>                
        </a>   
       -->
        <a id="Closebtn" class="imgbtn" href="javascript:void(0);">                
          <span class="Close" title="Close the window" >Close
          </span></a>            
        </a>        
      </div>                  
      <div style="clear: both">         
      </div>        
<div id="calendarcolor">
</div>
<div id="cusErrorPanel">
</div>


</label>    
{#
<?php echo $this->form; ?>#}
                     
