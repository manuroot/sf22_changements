{% extends "ApplicationCertificatsBundle::layout.html.twig" %}


{% block stylesheets %}
{{ parent() }}
{% stylesheets 
                '@ApplicationCertificatsBundle/Resources/public/css/sliding.css' 
                '@ApplicationCertificatsBundle/Resources/public/css/certifcatssearch.css' 
                output='css/compiled/mycertificats.css' filter='cssrewrite,?yui_css' debug=false %}
<link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
{% endstylesheets %}
<link rel="stylesheet" href="{{ asset('bundles/applicationcertificats/css/colorbox.css') }}" type="text/css" media="all"/>

<style>
        td {
    font-size: 12px;
  
}
   

.table {
    font-size: 11px;
    border-collapse: separate;
  /*  font-family: 'Times New Roman',Times,serif;*/
}

tr.title th {
   
    line-height: 30px;
  
}

tr.danger {background:red;}

    </style>
{% endblock %}
    
{% block content_header '' %}
{% block title %}FICHIERS-CERTIFICATS{% endblock %}

    
{% block content %}

{% for type, flashMessages in app.session.flashbag.all() %}
    {% for flashMessage in flashMessages %}
        <div class="alert alert-{{ type }}">
            {{ flashMessage|trans }}
        </div>
    {% endfor %}
{% endfor %}
 
   {% if is_granted("ROLE_ADMIN") %}
<a href="{{ path('certificats_documents_new') }}" class="btn btn-medium btn-primary">Ajouter Fichier</a>
{% endif %}
<br> <br>  
 
<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr class="title">
     <th>{{ knp_pagination_sortable(pagination, 'Id', 'a.id') }}</th>
     <th{% if pagination.isSorted('a.OriginalFilename') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Nom Origine', 'a.OriginalFilename') }}</th>
     <th{% if pagination.isSorted('a.md5') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'md5', 'a.md5') }}</th>
     <th{% if pagination.isSorted('a.updatedAt') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Date MAJ', 'a.updatedAt') }}</th>
     <th{% if pagination.isSorted('a.createdAt') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Date Creation', 'a.createdAt') }}</th>
     <th{% if pagination.isSorted('b.project') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Projet', 'b.project.nomprojet') }}</th>
     <th{% if pagination.isSorted('b.fileName') %} class="sorted"{% endif %}>{{ knp_pagination_sortable(pagination, 'Certificats', 'b.fileName') }}</th>
     {% if is_granted("ROLE_ADMIN") %}
                <th colspan="4">Actions</th>
                {% else %}
                <th>Actions</th>
                {% endif %}
             </tr>
    </thead>
<tbody>
    
     {% for entity in pagination %}
   
        <tr>
            <td><a href="{{ path('certificats_documents_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
            <td>
                {% if entity.OriginalFilename %}
                       <a class="fichier" href="{{ path('certificatscenter_download', { 'id': entity.id }) }}">{{ entity.OriginalFilename }}</a>
                    {% elseif entity.path %}
                <a class="fichier" href="{{ path('certificatscenter_download', { 'id': entity.id }) }}">{{ entity.path }}</a>
           {% else %}
                error
                 {% endif %}
                 </td>
          {# <td>{{ entity.OriginalFilename }}</td>createdAt#}
            <td>{{ entity.md5 }}</td>
             <td>{% if entity.updatedAt %}{{ entity.updatedAt|date('Y-m-d H:i:s') }}{% endif %}</td>
             <td>{% if entity.createdAt %}{{ entity.createdAt|date('Y-m-d H:i:s') }}{% endif %}</td>
               <td>{% if entity.certificats %}{{ entity.certificats.project }}{% endif %}</td>
             <td>{{ entity.certificats }}</td>
            <td>
               <a href="{{ path('certificats_documents_show', { 'id': entity.id }) }}">
                                                <img src="{{ asset('bundles/applicationcertificats/images/detail.png') }}" alt="show" width="15" height="15" />
                                            </a>
                                        </td>
                                        
                                           {% if is_granted("ROLE_ADMIN") %}
                                        
                                        
                            <td>        
            <a href="{{ path('certificatscenter_download', { 'id': entity.id }) }}">U</a>
         
            </td>
                       <td>
                    <a href="{{ path('certificats_documents_edit', { 'id': entity.id }) }}">
                        <img src="{{ asset('bundles/applicationcertificats/images/edit.png') }}" alt="edit" width="15" height="15" />
                    </a>
                </td>
                <td>


                    <a href="{{ path('certificats_documents_delete', { 'id': entity.id }) }}">
                        <img src="{{ asset('bundles/applicationcertificats/images/delete.png') }}" alt="delete" width="15" height="15" />
                    </a>
                </td>

                           {% endif %}  
                
                                  
        </tr>
    {% endfor %}
    </tbody>
</table>

               
   {{ knp_pagination_render(pagination, 'ApplicationCertificatsBundle:pagination:twitter_bootstrap_pagination.html.twig') }}

 
    
    
    
    {% endblock %}