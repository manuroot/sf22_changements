{% extends "::layout.html.twig" %}


{% block stylesheets %}
{{ parent() }}
<link rel="stylesheet" href="{{ asset('select2/select2.css') }}" type="text/css" media="all"/>
<link rel="stylesheet" href="{{ asset('bootstrap/css/jquery.pnotify.default.css') }}" type="text/css" />
<link rel="stylesheet" href="{{ asset('bundles/applicationchangements/css/colorbox.css') }}" type="text/css" media="all"/>
<link rel="stylesheet" href="{{ asset('bundles/applicationchangements/css/indexfanta.css') }}" type="text/css" media="all"/>
<link rel="stylesheet" href="{{ asset('css/jquery_flicker/jquery-ui-1.9.2.custom.css') }}" />    
<link rel="stylesheet" href="{{ asset('jquery/simplecolorpicker/colorPicker.css') }}" type="text/css" media="all"/>
 <style>
         .single {
         background-color: #f1f1f1;
         width:auto;
        }

    </style> 
{% endblock %}


{% block javascripts %}
    {{ parent() }}
{% endblock %}

{% block content_header '' %}


{% block title %}

{% endblock %}


{% block content %}
<h1>CalendarRoot list</h1>

<table class="records_list table table-striped table-bordered">
    <thead>
          <tr class="single">
      
            <th>Id</th>
            <th>Nom</th>
            <th>Start(Heure)</th>
            <th>End(Heure)</th>
            <th>Slot (Minutes)</th>
            <th>Owner</th>
            <th>Groupes Edition</th>
              <th>2eme Groupes Edition</th>
            <th colspan="2">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for entity in entities %}
            {% set flag="None" %}
             {% if is_granted('ROLE_ADMIN', entity) and  not is_granted('EDIT', entity)  %} 
            {% set flag="Admin" %}
            {% else %}
            {% set flag="User" %}
            {% endif %}
        <!-- only for admin or owner -->
        {% if is_granted('EDIT', entity) or is_granted('ROLE_ADMIN', entity) %} 
        <tr>

               {# <td><a href="{{ path('calendarroot_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>#}
            <td>{{ entity.id }}</td>
            <td>{{ entity.nom }}</td>
             <td>{{ entity.startHour }}</td>
            <td>{{ entity.endHour }}</td>

            <td>{{ entity.plage }}</td>
   <td>{{ entity.owner }}</td>
            <td> {{ entity.groupedit|join(', ') }}</td>
         <td> {{ entity.secondgroupedit|join(', ') }}</td>
            <td> <a href="{{ path('calendarroot_edit', { 'id': entity.id }) }}">
                          {{ flag }}      <img src="{{ asset('bundles/applicationchangements/images/edit.png') }}" alt="edit" width="15px" height="15px" />
                </a>
            </td>

            <td>
                <form class="useform-{{ entity.id }}" class="form-horizontal" action="{{ path('calendar_indexadesign') }}" method="post">

                    <input type="hidden" name="id" value="{{ entity.id }}"/>
                    <button type="submit" class="btn btn-small btn-warning">Utiliser</button>    

                </form>
            </td>
        </tr>
           {% endif %}
        {% endfor %}
    </tbody>
</table>
<a href="{{ path('calendarroot_new') }}" class="myleft btn btn-small btn-primary">
    Créer un nouveau calendrier
</a>

<a href="{{ path('calendarusergroup') }}" class="myleft btn btn-small btn-primary">
    Gérer Mes Groupes
</a>
{#
<form class="useform-1" class="form-horizontal" action="{{ path('calendar_userootcalendar') }}" method="post">
 <p>Votre nom : <input type="text" name="nom" /></p>
 <p>Votre âge : <input type="text" name="age" /></p>
 <input type="hidden" name="id" value="1"/>
 <p><input type="submit" value="OK"></p>

                  
                  <button type="submit" class="btn btn-small btn-warning">Utiliser</button>  
                    
                  </form>
 #}   {% endblock %}
